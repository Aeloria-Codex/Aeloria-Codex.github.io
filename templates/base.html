<!DOCTYPE html>
<html lang="en">
<head>
    <title>{% block title %}The Aeloria Codex{% endblock %}</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block description %}An FFXIV guide for all your needs!{% endblock %}">
    <meta name="keywords" content="FFXIV, Final Fantasy 14, Guide, Crafting, Leveling, Job, FFXIV Guides, MMORPG Guides, Eorzea,  FFXIV Tips, FFXIV Strategies, FFXIV Community">
    <meta name="author" content="The Aeloria Codex">
    <link rel="stylesheet" type="text/css" href="/css/master.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    <link rel="stylesheet" type="text/css" href="/css/crafter-leveling.css">
    <link rel="stylesheet" type="text/css" href="/css/tank-pulling.css">
    <link rel="stylesheet" type="text/css" href="/css/job-leveling.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Raleway&display=swap" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='favicon.webp') }}" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>
    <meta name="google-site-verification" content="72I39YpMkJEuEhti0Y7RGYipHFC_wdLBkZAPtUeYfaw" />
</head>
<body>

    <!-- navbar -->
    <nav class="navBar" role="navigation" aria-label="Main Navigation">
        <div class="leftside-nav">
            <ul>
                <li><a href="{{ url_for('index') }}">Home</a></li>
                <div class="nav-item has-dropdown">
                    <a href="{{ url_for('job_leveling') }}" class="main-link">Job Leveling<span class="dropdown-icon">â–¼</span></a>
                    <div class="dropdown-leveling-nav">
                        <a href="job-leveling.html#tank_leveling"><h3>Tanks</h3></a>
                        <hr>
                        <a href="{{ url_for('paladin_leveling') }}">Paladin</a>
                        <a href="{{ url_for('warrior_leveling') }}">Warrior</a>
                        <a href="{{ url_for('dark_knight_leveling') }}">Dark Knight</a>
                        <a href="{{ url_for('gunbreaker_leveling') }}">Gunbreaker</a>
                        <a href="job-leveling.html#healer_leveling"><h3>Healers</h3></a>
                        <hr>
                        <a href="{{ url_for('white_mage_leveling') }}">White Mage</a>
                        <a href="{{ url_for('scholar_leveling') }}">Scholar</a>
                        <a href="{{ url_for('astrologian_leveling') }}">Astrologian</a>
                        <a href="{{ url_for('sage_leveling') }}">Sage</a>
                        <a href="job-leveling.html#melee_dps_leveling"><h3>Melee</h3></a>
                        <hr>
                        <a href="{{ url_for('monk_leveling') }}">Monk</a>
                        <a href="{{ url_for('dragoon_leveling') }}">Dragoon</a>
                        <a href="{{ url_for('ninja_leveling') }}">Ninja</a>
                        <a href="{{ url_for('samurai_leveling') }}">Samurai</a>
                        <a href="{{ url_for('reaper_leveling') }}">Reaper</a>
                        <a href="{{ url_for('viper_leveling') }}">Viper</a>
                        <a href="job-leveling.html#physical_range_dps_leveling"><h3>Physical Range</h3></a>
                        <hr>
                        <a href="{{ url_for('bard_leveling') }}">Bard</a>
                        <a href="{{ url_for('machinist_leveling') }}">Machinist</a>
                        <a href="{{ url_for('dancer_leveling') }}">Dancer</a>
                        <a href="job-leveling.html#magic_range_dps_leveling"><h3>Magic Range</h3></a>
                        <hr>
                        <a href="{{ url_for('black_mage_leveling') }}">Black Mage</a>
                        <a href="{{ url_for('summoner_leveling') }}">Summoner</a>
                        <a href="{{ url_for('red_mage_leveling') }}">Red Mage</a>
                        <a href="{{ url_for('pictomancer_leveling') }}">Pictomancer</a>
                        <a href="{{ url_for('blue_mage_leveling') }}">Blue Mage</a>
                    </div>
                </div>
                <li><a href="{{ url_for('crafter_leveling') }}">Crafter Leveling</a></li>
                <li><a href="{{ url_for('tank_pulling') }}">Tank Pulling Guide</a></li>
            </ul>
        </div>
        <div class="rightside-nav">
        <!-- search box -->
        <input type="text" id="searchInput" placeholder="Search guides...">
        <div class="searchResults" id="searchResults"></div>
    
        <!-- theme switch -->
        <label class="switch">
            <input type="checkbox" id="modeToggle">
            <span class="slider"></span>
            <span class="theme-icon" aria-hidden="true">
                <i class="fa fa-sun-o light-icon"></i> 
                <i class="fa fa-moon-o dark-icon"></i>
            </span>
        </label>
        </div>
    </nav>

    {% block content %}

    {% endblock %}

    <!-- bottom banner -->
    <footer id="footer">
        <div>
          <div id="footer-div-top">
            <!-- Logo / Branding -->
            <div id="footer-column">
              <h2>The Aeloria Codex</h2>
              <p>Your source for Final Fantasy XIV Guides.</p>
            </div>
      
            <!-- Quick Links -->
            <div id="footer-column">
              <h3>Quick Links</h3>
              <ul>
                <li><a href="/job-leveling.html">Job Leveling</a></li>
                <li><a href="/crafter-leveling.html">Crafter Leveling</a></li>
                <li><a href="/tank-pulling.html">Tank Pulling Guide</a></li>
                <!-- Add more guide links as needed -->
              </ul>
            </div>
      
            <!-- Social Media Icons -->
            <div id="footer-column">
              <h3>Follow Us</h3>
              <a href="https://github.com/Aeloria-Codex/Aeloria-Codex.github.io"><img src="/images/github-icon.webp" alt="Github" style="width: 24px;"></a>
              <!-- Add more social icons as needed -->
            </div>
          </div>
      
          <hr>
      
          <!-- Copyright and Credits -->
          <p>&copy; 2024 Aeloria Codex. All Rights Reserved.</p>
          <p>Final Fantasy XIV is a trademark of Square Enix. This website is not affiliated with Square Enix.</p>
          <p>This is an Open Sourced FFXIV Guide Website! If you wish to contribute fork the Main repo and push your change back to the Main repo!</p>
          <a id="references" href="/references.html">References & Credits</a>
        </div>
    </footer>

    <!--scripts-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="/js/script.js"></script>
    <script>
        const body = document.body;
        const modeToggle = document.getElementById('modeToggle');

        // Check for saved mode preference or use default (dark-mode)
        const currentMode = localStorage.getItem('mode') || 'dark-mode';
        body.classList.add(currentMode);

        // Set the switch state based on the current mode
        modeToggle.checked = currentMode === 'dark-mode';

        modeToggle.addEventListener('change', () => {
            if (body.classList.contains('light-mode')) {
                body.classList.replace('light-mode', 'dark-mode');
                localStorage.setItem('mode', 'dark-mode');
            } else {
                body.classList.replace('dark-mode', 'light-mode');
                localStorage.setItem('mode', 'light-mode');
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                const savedState = localStorage.getItem(checkbox.id);
                if (savedState !== null) {
                    checkbox.checked = savedState === 'true';
                }

                // Add event listener to save state on change
                checkbox.addEventListener('change', () => {
                    localStorage.setItem(checkbox.id, checkbox.checked);
                });
            });
        });
        
//////////////////////////////////////////////////////////////////////////////////////////////////////////
// Search 
//////////////////////////////////////////////////////////////////////////////////////////////////////////

        fetch('/search')
        .then(response => response.json())
        .then(guides => {
            // Ensure each guide has a tags property
            const processedGuides = guides.map(guide => ({
                ...guide,
                tags: guide.tags || [] // Default to empty array if tags is undefined
            }));
    
            const fuse = new Fuse(processedGuides, {
                keys: [
                    'title', 
                    'description', 
                    'keywords', 
                    'url'
                ],
                threshold: 0.3
            });
    
            document.getElementById('searchInput').addEventListener('input', (event) => {
                const searchTerm = event.target.value;
                const resultsContainer = document.getElementById('searchResults');
                resultsContainer.innerHTML = ''; // Clear previous results
    
                if (searchTerm.length > 1) {
                    const results = fuse.search(searchTerm);
                    
                    results.forEach(result => {
                        const guideElement = document.createElement('div');
                        guideElement.innerHTML = `
                            <a href='${result.item.url}'>${result.item.title.slice(6, -19)}</a>
                        `;
                        resultsContainer.appendChild(guideElement);
                    });
                }
            });
        });
    </script>
</body>
</html>